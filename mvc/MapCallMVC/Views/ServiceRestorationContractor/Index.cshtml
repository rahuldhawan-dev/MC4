@model SearchServiceRestorationContractor

@{
    var table = Html.TableFor(_ => Model, new {id = "serviceRestorationContractors"})
        .WithCaption("Records Found: " + Model.Count)
        .TemplateColumnFor(x => @<text>
                                    @if (!x.HasRestorations)
                                    {
                                        if (Html.CurrentUserCanDo("Destroy", "ServiceRestorationContractor"))
                                        {
                                            @Control.SubmitButton("Delete").WithName("Id").WithValue(x.Id).WithCssClass("button-link").With("onclick", "return confirm('Are you sure?');")
                                        }

                                        <text>&nbsp;</text>

                                        if (Html.CurrentUserCanDo("Edit", "ServiceRestorationContractor"))
                                        {
                                            @Control.ActionLink("Edit", "Edit", "ServiceRestorationContractor", new {x.Id})
                                        }
                                    }
                                 </text>)
        .SortableColumnFor(x => x.Contractor)
        .SortableColumnFor(x => x.OperatingCenter)
        .SortableColumnFor(x => x.FinalRestoration)
        .SortableColumnFor(x => x.PartialRestoration)
        .WithPaginatedFooter();
}

@if (Html.CurrentUserCanDo("Destroy", "ServiceRestorationContractor"))
{
    using (var form = Form.BeginForm("Destroy", "ServiceRestorationContractor"))
    {
        @table
    }
}
else
{
    @table
}