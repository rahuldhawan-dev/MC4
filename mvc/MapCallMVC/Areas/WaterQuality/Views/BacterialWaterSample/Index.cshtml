@using MapCallMVC.Areas.WaterQuality.Models.ViewModels
@using MMSINC.Helpers
@using MMSINC.Results
@model MapCallMVC.Areas.WaterQuality.Models.ViewModels.SearchBacterialWaterSample

@{
	ActionBarHelper.AddExportLink();
	ActionBarHelper.AddMapLink();
	ViewBag.AllowEdit = true;

	var massExportRvd = ViewData.ModelState.ToRouteValueDictionary();
	massExportRvd.Add("ext", ResponseFormatter.KnownExtensions.EXCEL_2003);

	ActionBarHelper.AddLink("Mass Edit Export", "ab-export", "Export", "BacterialWaterSampleMassEdit", massExportRvd, null, "Download excel file for mass editing");
	ActionBarHelper.AddLink("Mass Edit Import", "ab-import", "New", "BacterialWaterSampleMassEdit", null, null, "Import excel file for mass updating");
}

@Html.ScriptFor("~/Scripts/Areas/WaterQuality/BacterialWaterSample/Index.js", ScriptLoadType.LoadFromPartial)

@{
    var table = Html.TableFor(_ => Model, new {id = "bacterialWaterSamples"})
        .WithCaption("Records Found: " + Model.Count);

    Html.RenderPartial("_ShowColumns", table);

    table.WithPaginatedFooter();
}

@if (Html.CurrentUserCanEdit())
{
    <form id="inlineEditForm">
        @table
    </form>
}
else
{
    @table
}
