using System;
using MMSINC.Controls;
using MMSINC.Interface;

namespace LINQTo271.Controls.WorkOrders
{
    public partial class WorkOrderMarkoutViolationForm : WorkOrderDetailControlBase, IWorkOrderMarkoutViolationForm
    {
        #region Control Declarations

        protected IGridView gvMarkoutViolations;
        protected IObjectDataSource odsMarkoutViolations;

        #endregion

        #region Private Methods

        protected override void SetDataSource(int workOrderID)
        {
            odsMarkoutViolations.SelectParameters["WorkOrderID"].DefaultValue =
                workOrderID.ToString();
        }

        #endregion

        #region Event Handlers

        #region Page Events

        protected void Page_Load(object sender, EventArgs e)
        {
            var visible = (CurrentMvpMode != DetailViewMode.ReadOnly);
            gvMarkoutViolations.AutoGenerateSelectButton = false;
            gvMarkoutViolations.AutoGenerateDeleteButton = visible;
            gvMarkoutViolations.AutoGenerateEditButton = false;
        }

        protected override void Page_Prerender(object sender, EventArgs e)
        {
            base.Page_Prerender(sender, e);

            if (gvMarkoutViolations.IFooterRow != null)
            {
                gvMarkoutViolations.IFooterRow.Visible = (CurrentMvpMode != DetailViewMode.ReadOnly);
            }
        }

        #endregion

        #endregion
    }

    public interface IWorkOrderMarkoutViolationForm : IWorkOrderDetailControl
    {
    }
}
