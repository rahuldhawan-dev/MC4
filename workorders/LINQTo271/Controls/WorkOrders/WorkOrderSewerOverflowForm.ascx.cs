using System;
using MMSINC.Controls;
using MMSINC.Interface;

namespace LINQTo271.Controls.WorkOrders
{
    public partial class WorkOrderSewerOverflowForm : WorkOrderDetailControlBase, IWorkOrderSewerOverflowForm
    {
        #region Control Declarations

        protected IGridView gvSewerOverflows;
        protected IObjectDataSource odsSewerOverflows;

        #endregion

        #region Private Methods

        protected override void SetDataSource(int workOrderID)
        {
            odsSewerOverflows.SelectParameters["WorkOrderID"].DefaultValue =
                workOrderID.ToString();
        }

        #endregion

        #region Event Handlers

        protected void Page_Load(object sender, EventArgs e)
        {
            var visible = (CurrentMvpMode != DetailViewMode.ReadOnly);
            gvSewerOverflows.AutoGenerateSelectButton = false;
            gvSewerOverflows.AutoGenerateDeleteButton = visible;
            gvSewerOverflows.AutoGenerateEditButton = false;
        }

        protected override void Page_Prerender(object sender, EventArgs e)
        {
            base.Page_Prerender(sender, e);

            if (gvSewerOverflows.IFooterRow != null)
            {
                gvSewerOverflows.IFooterRow.Visible =
                    (CurrentMvpMode != DetailViewMode.ReadOnly);
            }
        }

        #endregion
    }

    public interface IWorkOrderSewerOverflowForm : IWorkOrderDetailControl {}
}